
<style media="screen" type="text/css">

    .ui-state-active,
    .ui-widget-content .ui-state-active,
    .ui-widget-header .ui-state-active,
    a.ui-button:active,
    .ui-button:active,
    .ui-button.ui-state-active:hover {
        border: 1px solid #205081 !important;
        background: #205081 !important;
    }


    .ui-dialog-titlebar-close{
        display: none;
    }

    .dataFlowSelectedElement {
        border: 1px solid #ff9933 !important;
        background-color: #fff2e6 !important;
    }

    .transformationToolBox {
        border: 1px dashed #5f6060;
        color: #205081;
        -moz-border-radius: 2px;
        -webkit-border-radius: 2px;
        border-radius: 2px;
        -khtml-border-radius: 2px;
        margin: 10px;
        cursor: move;
        width: 140px;
        text-align: center;
    }

     .dataFlow.deleteButton {
        font-size:18px;
        position: absolute;
        top:0;
        left:0;
        color: red;
        background-color: transparent;
        top:-11px;
        left:-11px;
        cursor: pointer;
    }

    span.deleteIconContainer{
        background-color: white;
        line-height: 40%;
    }

    span.deleteIconContainer > i {
        padding: 0px;
        margin: 0px;
        display: inline-block;
        width: auto;
        height: auto;
        line-height: inherit;
        vertical-align: baseline;
        background-color: white;
    }


    .deleteButtonHide{
        display: none;
    }


    .rootDataModel{
        border: 3px solid #205081 !important;
        background-color: #e0edf9 !important;
    }

    .rootDataModel > .dataModelTitle{
        background-color: #e0edf9 !important;
    }
    .dataModel{
        border:  2px solid #d8d8d8;
        width:150px;
        height:60px;
        text-align: center;
        cursor: move;
        overflow: hidden;
        padding-top: 5px;
        background-color: #ededed;
    }
    .dataModelSelected {
        border-color: #ff9933 !important;
        background-color: #fff2e6 !important;
    }

    .dataModelSelected > .dataModelTitle{
        background-color: #fff2e6 !important;
    }

    .dataModelTitle{
        padding: 10px;
        text-align: center;
        cursor: pointer;
    }


    .dataClass{
        border:  1px solid #DDD;
        width:200px;
        background-color: #FFF;
        min-height:100px;
    }
    .dataClassTitle{
        border-bottom: 1px solid #DDD;
        font-weight: bold;
        height:30px;
        text-align:center;
        padding: 5px;
        cursor: move;
        word-wrap: break-word;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
    }

    .dataElement{
        border-bottom:  1px solid #DDD;
        cursor: pointer;
    }

    .dataElementContainer {
        width:100%;
        position: absolute;
        top: 40px;
        bottom: 0px;
        overflow-y: scroll;
        overflow-x: hidden;
    }


    .transformation{
        border: 1px solid #DDD;
        padding: 10px;
        background-color: #FFF;
        cursor: move;
    }

    .transformationTitle {
        cursor: pointer;
    }

    div.designerContainer{
        /*border: 1px solid red;*/
        width:  calc(99vw - 20px);
        height: calc(90vh - 5px);
        overflow: scroll;
    }

    div.designer{
        width: calc(200vw - 20px);
        height: calc(180vh - 10px);
        border: 1px solid #DDD;
        position:relative;
    }

    svg.designer {
        width: calc(200vw - 20px);
        height: calc(180vh - 10px);
        /*border: 1px solid black;*/
    }


    path.deletePath{
        cursor: pointer;
    }

    path.deletePathHide{
        display: none;
    }

    circle.middleCircle{
        cursor: pointer;
    }

    circle.middleCircleHide{
        display: none;
    }

    .fatPath {
        stroke: gray;
        stroke-width: 20;
        fill: none;
        opacity:0.1;
        cursor: pointer;
    }

    .fatPathSelected {
        stroke: orange !important;
        stroke-width: 20;
        fill: none;
        opacity:0.2;
        cursor: pointer;
    }

    .fatPath.hideFatPath{
        stroke: transparent;
    }

</style>



<!--<div style="width: 99%; margin: 0 auto;padding-top: 10px;height: calc(100vh - 70px);">-->
    <!--<div>-->
        <!--<div class="designerContainer">-->
            <!--<div class="designer">-->
                <!--<svg class="designer" xmlns="http://www.w3.org/2000/svg">-->
                    <!--<defs>-->
                        <!--<marker id="markerCircle" markerWidth="8" markerHeight="8" refX="5" refY="5">-->
                            <!--<circle cx="5" cy="5" r="3" style="stroke: none; fill:#000000;"/>-->
                        <!--</marker>-->
                        <!--<marker id="markerArrow" markerWidth="13" markerHeight="13" refX="2" refY="6"-->
                                <!--orient="auto">-->
                            <!--<path d="M2,2 L2,11 L10,6 L2,2" style="fill: #000000;"/>-->
                        <!--</marker>-->
                    <!--</defs>-->
                <!--</svg>-->
            <!--</div>-->
        <!--</div>-->
    <!--</div>-->
<!--</div>-->



<div style="width: 100%; margin: 5px auto;height: calc(100vh - 70px);border: 1px solid #DDD;">
    <div id="one-left" class="split split-horizontal" style="width: calc(20% - 5px);">
        <div style="background-color: #f5f5f5; padding:5px 10px; border-bottom: 1px solid #ddd;">
            Properties
        </div>
        <div style="padding-top: 5px;">
            <div>
                <div ng-show="selectedElement && selectedElement.type == 'dataFlow'">
                    <form style="margin: 10px;">
                        <div class="form-group">
                            <label for="dataFlowName">Name</label>
                            <input ng-disabled="form.isReadOnly" class="form-control form-control-sm" id="dataFlowName" aria-describedby="dataFlowName" placeholder="DataFlow Name" ng-model="form.label">
                        </div>
                        <div class="form-group">
                            <label for="dataFlowDescription">Description</label>
                            <textarea ng-disabled="form.isReadOnly" class="form-control form-control-sm" id="dataFlowDescription" placeholder="DataFlow Description" ng-model="form.description"></textarea>
                        </div>
                        <button ng-disabled="form.isReadOnly" type="button" class="btn btn-primary btn-sm" ng-click="saveForm()">Save</button>
                        <button ng-disabled="form.isReadOnly" type="button" class="btn btn-default btn-sm" ng-click="cancelForm()">Cancel</button>
                    </form>
                    <div style="margin-top: 5px;">
                        <uib-tabset>
                            <uib-tab>
                                <uib-tab-heading>
                                    Transformations
                                    <span style="display:inline;" ng-show="form.dataFlowComponents && form.dataFlowComponents.length>0">({{form.dataFlowComponents.length}})</span>
                                </span>
                                </uib-tab-heading>
                                <div>
                                    <table class="table table-hover table-condensed">
                                        <thead>
                                        <th>Name</th>
                                        <th>Description</th>
                                        </thead>
                                        <tbody>
                                        <tr ng-repeat="t in form.dataFlowComponents">
                                            <td>
                                                {{t.label}}
                                            </td>
                                            <td>
                                                {{t.description}}
                                            </td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </uib-tab>
                            <uib-tab ng-if="selectedElement && selectedElement.mcDataFlow">
                                <uib-tab-heading>
                                    Properties
                                </uib-tab-heading>
                                <div>
                                    <mc-data-set-metadata
                                            parent="selectedElement.mcDataFlow"
                                            type = "'dynamic'"
                                            loading-data="loadingData"></mc-data-set-metadata>
                                </div>
                            </uib-tab>
                            <uib-tab ng-if="selectedElement && selectedElement.mcDataFlow">
                                <uib-tab-heading>
                                    Comments
                                </uib-tab-heading>
                                <div>
                                    <annotation-list parent="selectedElement.mcDataFlow"
                                                     loading-data="loadingData"
                                                     type="'dynamic'"></annotation-list>
                                </div>
                            </uib-tab>
                        </uib-tabset>
                    </div>
                </div>
                <div ng-show="selectedElement && selectedElement.type == 'dataModel'">
                    <table class="table table-hover table-condensed" >
                        <tbody>
                            <tr>
                                <td width="5px" style="border-top: 0px !important;">
                                    <strong>Name</strong>
                                    <div>{{selectedElement.dataModel.label}}</div>
                                </td>
                            </tr>
                            <tr>
                                <td width="5px" style="border-top: 0px !important;">
                                    <strong>Description</strong>
                                    <div>{{selectedElement.dataModel.description}}</div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div ng-show="!selectedElement">
                    <table class="table table-hover table-condensed" >
                        <tbody>
                        <tr>
                            <td width="5px" style="border-top: 0px !important;">
                                <strong>Name</strong>
                                <div>{{source.label}}</div>
                            </td>
                        </tr>
                        <tr>
                            <td width="5px" style="border-top: 0px !important;">
                                <strong>Description</strong>
                                <div>{{source.description}}</div>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <!--<uib-tabset active="activeTab">-->
                <!--<uib-tab>-->
                    <!--<uib-tab-heading>-->
                        <!--Properties-->
                    <!--</uib-tab-heading>-->
                    <!--<div>-->
                        <!--<div ng-show="selectedElement && selectedElement.type == 'dataFlow'">-->
                            <!--<form style="margin: 10px;">-->
                                <!--<div class="form-group">-->
                                    <!--<label for="dataFlowName">Name</label>-->
                                    <!--<input class="form-control form-control-sm" id="dataFlowName" aria-describedby="dataFlowName" placeholder="DataFlow Name" ng-model="form.label">-->
                                <!--</div>-->
                                <!--<div class="form-group">-->
                                    <!--<label for="dataFlowDescription">Description</label>-->
                                    <!--<textarea class="form-control form-control-sm" id="dataFlowDescription" placeholder="DataFlow Description" ng-model="form.description"></textarea>-->
                                <!--</div>-->
                                <!--<button type="button" class="btn btn-primary btn-sm" ng-click="saveForm()">Save</button>-->
                                <!--<button type="button" class="btn btn-default btn-sm" ng-click="cancelForm()">Cancel</button>-->
                            <!--</form>-->
                        <!--</div>-->
                    <!--</div>-->
                <!--</uib-tab>-->
                <!--<uib-tab>-->
                    <!--<uib-tab-heading>-->
                        <!--Transformations <span ng-show="dataFlowHandler && dataFlowHandler.transformations.length>0">({{dataFlowHandler.transformations.length}})</span>-->
                    <!--</uib-tab-heading>-->
                    <!--<div>-->

                        <!--<table class="table table-hover table-condensed">-->
                            <!--<thead>-->
                            <!--<th width="10px"><i class="fa fa-eye" aria-hidden="true"></i></th>-->
                            <!--<th>Name</th>-->
                            <!--<th>Description</th>-->
                            <!--</thead>-->
                            <!--<tbody>-->
                            <!--<tr ng-repeat="t in dataFlowHandler.transformations">-->
                                <!--<td width="10px">-->
                                    <!--<input type="checkbox" ng-model="t.visible">-->
                                <!--</td>-->
                                <!--<td>-->
                                    <!--&lt;!&ndash;<input class="form-control input-sm" ng-model="t.transformation.label">&ndash;&gt;-->
                                    <!--{{t.transformation.label}}-->
                                <!--</td>-->
                                <!--<td></td>-->
                            <!--</tr>-->
                            <!--</tbody>-->
                        <!--</table>-->
                    <!--</div>-->
                <!--</uib-tab>-->
            </uib-tabset>
        </div>
    </div>
    <div id="one-centre" class="split split-horizontal" style="width: calc(60% - 5px);">
        <div style="width: 100%; margin: 0 auto;height: calc(80% - 10px);">
            <div>
                <div style="padding: 4px;">
                    <form id="dataFlowImportForm">
                        <input type="file" style="position: fixed; top: -100em" id="dataFlowImportFile" file-on-change="import"/>
                        <button type="reset" id="dataFlowImportFormReset" style="display:none"/>
                    </form>
                    <div ng-if="access && access.showEdit"
                         class="btn-group-xs" uib-dropdown is-open="false" style="margin-bottom: 3px;position: relative; float: left; margin-right:4px;">
                        <button type="button"
                                class="btn btn-xs dropdown-toggle btn-default addNewModelButton themeColor"
                                uib-tooltip="Import a Dataflow"
                                tooltip-class="infoText"
                                tooltip-placement="right"
                                uib-dropdown-toggle>
                            <i class="fa fa-upload themeColor" aria-hidden="true"></i>
                            <span class="caret" style="margin-right: 2px;"></span>
                        </button>
                        <ul class="dropdown-menu-left" uib-dropdown-menu
                            role="menu" aria-labelledby="single-button">
                            <li ng-repeat="importer in importersList" class="modelFilterItem" ng-click="openImportDialogue(importer)">
                                <a title="{{importer.displayName}}">{{importer.displayName}}</a>
                            </li>
                        </ul>
                    </div>
                    <div
                         class="btn-group-xs" uib-dropdown is-open="false" style="margin-bottom: 3px;position: relative; float: left; margin-right:4px;">
                        <button type="button"
                                class="btn btn-xs dropdown-toggle btn-default addNewModelButton themeColor"
                                tooltip-class="infoText"
                                tooltip-placement="right"
                                uib-tooltip="Export Dataflow(s)"
                                uib-dropdown-toggle>
                            <i class="fa fa-download themeColor" aria-hidden="true"></i>
                            <span class="caret" style="margin-right: 2px;"></span>
                        </button>
                        <ul class="dropdown-menu" uib-dropdown-menu
                            role="menu" aria-labelledby="single-button">
                            <li ng-repeat="exporter in exportersList" class="modelFilterItem" ng-click="export(exporter)">
                                <a title="{{exporter.displayName}}">{{exporter.displayName}}</a>
                            </li>
                        </ul>
                    </div>
                    <div class="btn-group-xs" uib-dropdown is-open="false"
                         style="margin-bottom: 3px;position: relative; float: left; margin-right:4px;">
                        <button type="button"
                                ng-click="refreshDataFlow()"
                                class="btn btn-xs btn-default addNewModelButton themeColor"
                                tooltip-class="infoText"
                                tooltip-placement="right"
                                uib-tooltip="Reload Dataflows">
                            <i class="fa fa-refresh themeColor" aria-hidden="true"></i>
                        </button>
                    </div>


                    <div style="width:50%;float: left;" ng-show="dataFlowProcessing">
                        <uib-progressbar max="100" value="100" class="progress-striped active" style="margin-bottom: 0px;">
                            <span style="color:white; white-space:nowrap;"></span>
                        </uib-progressbar>
                    </div>
                    <div style="float: left;margin-left: 5px;"
                         ng-show="exportedFileIsReady">
                        <div id="exportDataFlowFileDownload"></div>
                    </div>

                    <!--<a ng-if="access && access.showEdit"-->
                       <!--uib-tooltip="Import Dataflow from Excel"-->
                       <!--ng-click="refreshDataFlow()"-->
                       <!--class="btn btn-default btn-xs"-->
                       <!--style="margin: 2px 1px 1px 1px;">-->
                        <!--<i class="fa fa-upload themeColor"></i>-->
                    <!--</a>-->
                    <!--<a uib-tooltip="Reload Dataflows"-->
                       <!--ng-click="refreshDataFlow()"-->
                       <!--class="btn btn-default btn-xs"-->
                       <!--style="margin: 2px 1px 1px 1px;">-->
                        <!--<i class="fa fa-refresh themeColor"></i>-->
                    <!--</a>-->
                </div>
                <div class="designerContainer">
                    <div class="designer" ng-dblclick="divDbClick($event)">
                        <div id="dialog-confirm" title="DataFlow" style="display: none;">
                            Are you sure?
                        </div>
                        <svg class="designer" xmlns="http://www.w3.org/2000/svg">
                            <defs>
                                <marker id="markerCircle" markerWidth="8" markerHeight="8" refX="5" refY="5">
                                    <circle cx="5" cy="5" r="3" style="stroke: none; fill:#000000;"/>
                                </marker>
                                <marker id="markerArrow" markerWidth="13" markerHeight="13" refX="2" refY="6" orient="auto">
                                    <path d="M2,2 L2,11 L10,6 L2,2" style="fill: #000000;"/>
                                </marker>
                            </defs>
                        </svg>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="one-right" class="split split-horizontal" style="width: calc(20% - 5px);">
        <div style="background-color: #f5f5f5; padding:5px 10px; border-bottom: 1px solid #ddd;">
            Data Models
        </div>
        <div style="width: 100%;height: 100%;" class="treeWaitingSpinner" ng-show="targetTreeLoading">
            <div style="position: relative;top:calc(40vh - 50px);left:40%;">
                <a style="font-size: 75px;" class="themeColor">
                    <i class="fa fa-refresh fa-spin treeViewSpinner"></i>
                </a>
            </div>
        </div>
        <!--<div my-tree-multi-level-->
             <!--tree-name="'allModels'"-->
             <!--children="allModels"-->
             <!--style="padding-top: 4px;height: 100%;overflow-y: scroll;overflow-x: scroll;"-->
             <!--on-select="allModelsTreeOnSelect"-->
             <!--just-data-models="true"-->
             <!--select-on-state-change="false">-->
        <!--</div>-->

        <folders-tree-2
                enable-drag="true"
                enable-drop="false"
                node="allModels"></folders-tree-2>

    </div>
</div>


<script type="text/javascript">

    $(function() {
//        Split(['#one-left-top', '#one-left-bottom'], {
//            sizes: [65, 35],
//            direction: 'vertical'
//        });

        Split(['#one-left', '#one-centre', '#one-right'], {sizes: [20, 60, 20]});

        $(".transformationToolBox").draggable({
            helper: "clone"
        });

    });

</script>
