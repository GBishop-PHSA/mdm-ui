<div>
	<div *ngIf="model.createType == 'new'">
		<div class="form-group">
			<form #myForm="ngForm" ngNativeValidate>
				<span>Please enter Data Type details:</span>

				<mdm-data-type-inline [parent-scope-handler]="parentScopeHandler"
									  [model]="model"
									  [parent-data-model]="model.parent.breadcrumbs"
									  [show-parent-data-model]="true"
									  [show-classification]="true"
									  (validationStatusEvent)="validationStatusEmitter($event)">
				</mdm-data-type-inline>
			</form>
		</div>
	</div>
	<div *ngIf="model.createType == 'copy'" class="row" style="margin-bottom:20px;">
		<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
			<span>Please Select Data Type(s):</span>
			<div class="mcTableMain">
				<div class="mcTableTitle">
					<span class="title">
						Data Types<span class="badge element-count ng-binding" style="margin: 0px 3px; display: inline;" aria-hidden="false">{{totalItemCount}}</span>
						<i class="fas fa-filter" (click)="filterClick()" style="cursor: pointer;margin-left: 2px;"></i>
					</span>
				</div>
				<div class="mcTableContainer">
					<table mat-table [dataSource]="dataSourceDataTypes" matSort class="table table-bordered">
						<ng-container matColumnDef="checkbox">
							<th mat-header-cell *matHeaderCellDef columnName="checkbox" style="cursor: pointer; max-width: 3%; width: 3%;" class="mcTableCheckbox">
								<input type="checkbox" [checked]="isAllChecked" (change)="onCheckAll()" [(ngModel)]="checkAllCheckbox" class="checkboxAll" style="cursor: pointer;">
							</th>
							<td mat-cell *matCellDef="let record" style="max-width: 3%; width: 3%; text-align: center;" class="mcTableCheckbox">
								<input style="cursor: pointer;" type="checkbox" (change)="onCheck(record)" [(ngModel)]="record.checked">
							</td>
						</ng-container>
						<ng-container matColumnDef="label">
							<th mat-header-cell *matHeaderCellDef mat-sort-header [disabled]="!hideFilters" columnName="label" style="cursor: pointer; max-width: 23%; width: 23%;" class="mcTableCheckbox">
								<span [hidden]="!hideFilters" style="font-weight: 700; color: black">Name</span>
								<div [hidden]="hideFilters">
									<mat-form-field class="filter" floatLabel="never">
										<mat-label>Name</mat-label>
										<input #filters matInput name="label" (keyup)="applyFilter()">
									</mat-form-field>
								</div>
							</th>
							<td mat-cell *matCellDef="let record" style="max-width: 23%; width: 23%; text-align: center;" class="mcTableCheckbox">
								{{record.label}}
							</td>
						</ng-container>
						<ng-container matColumnDef="description">
							<th mat-header-cell *matHeaderCellDef mat-sort-header [disabled]="!hideFilters" style="cursor: pointer; max-width: 26%; width: 26%;" columnName="description">
								<span [hidden]="!hideFilters">Description</span>
								<div [hidden]="hideFilters">
									<mat-form-field class="filter" floatLabel="never">
										<mat-label>Description</mat-label>
										<input #filters matInput name="description" (keyup)="applyFilter()">
									</mat-form-field>
								</div>
							</th>
							<td mat-cell *matCellDef="let record" style="max-width: 26%; width: 26%; text-align: left; word-wrap: break-word;">
								<span>{{record.description}}</span>
							</td>
						</ng-container>
						<ng-container matColumnDef="domainType">
							<th mat-header-cell *matHeaderCellDef mat-sort-header [disabled]="!hideFilters" style="cursor: pointer; max-width: 26%; width: 26%;" columnName="domainType">
								<span [hidden]="!hideFilters">Type</span>
								<div [hidden]="hideFilters">
									<mat-label>Type</mat-label>
									<mat-select [(value)]="model.domainType"
												name="domainType"
												[(ngModel)]="model.domainType"
												(ngModelChange)="applyMatSelectFilter($event, 'domainType')">
										<mat-option></mat-option>
										<mat-option [value]="dt" *ngFor="let dt of allDataTypes">{{dt.displayLabel}}</mat-option>
									</mat-select>
								</div>
							</th>
							<td mat-cell *matCellDef="let record" style="max-width: 26%; width: 26%; text-align: left; word-wrap: break-word;">
								<span>{{record.domainType}}</span>
							</td>
						</ng-container>

						<tr mat-header-row *matHeaderRowDef="displayedColumnsDataTypes"></tr>
						<tr mat-row *matRowDef="let record; columns: displayedColumnsDataTypes;"></tr>

					</table>
					<!--<mc-table mc-record-type="'dynamic'"
								  mc-fetch-method="dataTypesFetch"
								  mc-records="records"
								  mc-static-loading-in-progress="loading"
								  mc-table-handler="mcTableValues.mcTableHandler"
								  mc-display-records="mcDisplayRecords"
								  mc-on-fetch-called="onFetchCalled"
								  mc-page-number="1">
						<div class="mcTableMain">
							<div class="mcTableTitle">
								<span class="title">Data Types</span>
								<div tooltip-placement="bottom"
									 tooltip-class="selectedDataTypesToolTip"
									 style="float: right; margin-right: 10px;">
									<a style="text-decoration: none;cursor: pointer;">Selected</a>
									<span class="badge element-count"
										  style="margin:0px 3px;display:inline;font-size:12px !important; cursor: pointer;">{{model.selectedDataTypes.length}}</span>
								</div>
							</div>
							<div class="mcTableContainer">
								<table class="table  table-bordered mcTable">
									<thead>
									<tr class="mcTableHeader">
										<th style="cursor:pointer;max-width: 15%;width: 15%;" columnName="label"
											sortable="true" filterable="true">
											<input style="cursor:pointer;" type="checkbox" ng-model="mcTableValues.selectAllRows" ng-change="selectAllChanged()" (click)="selectAllClicked(event)"> Name
										</th>
										<th style="cursor:pointer;max-width: 20%;width: 20%;" columnName="description"
											sortable="true" filterable="true">
											Description
										</th>
										<th style="cursor:pointer;max-width: 20%;width: 20%;" columnName="domainType"
											sortable="true" filterable="true">
											Type
										</th>
									</tr>
									<tr class="mcTableFilter">
										<td style="cursor:pointer;max-width: 15%;width: 15%;">
											<input class="form-control input-sm" type="text" autocomplete="off">
										</td>
										<td style="cursor:pointer;max-width: 20%;width: 20%;">
											<input class="form-control input-sm" type="text" autocomplete="off">
										</td>
										<td style="cursor:pointer;max-width: 20%;width: 20%;">
											<select class="form-control input-sm mcSelect">
												<option value="dataType.id" ng-repeat="dataType in allDataTypes">{{dataType.id}}</option>
											</select>
										</td>
									</tr>
									</thead>
									<tbody>
									<tr ng-repeat="record in mcDisplayRecords">
										<td style="max-width: 15%;width: 15%;text-align: left;word-wrap: break-word;">
											<div>
												<input type="checkbox"
													   style="cursor: pointer;"
													   (click)="add(record)"
													   [checked]="isChecked(record)">
												<mdm-element-link mc-element="record"
															  new-window="true"
															  mc-data-model-parent="{id:record.dataModel}"></element-link>
											</div>
										</td>
										<td style="max-width: 20%;width: 20%;text-align: left;word-wrap: break-word;">
											<div *ngIf="record.description && record.description.length>0"
												 style="margin-bottom: 10px;">
												<more-description description="{{::record.description}}"></more-description>
											</div>
										</td>
										<td style="max-width: 20%;width: 20%;text-align: left;word-wrap: break-word;">
											<div style="font-weight: bold;">
												<span [hidden]="record.domainType == 'PrimitiveType'">
													Primitive
												</span>
												<span [hidden]="record.domainType == 'EnumerationType'">
													Enumeration
												</span>
												<span [hidden]="record.domainType == 'ReferenceType'">
													Reference
												</span>
											</div>
											<element-data-type element-data-type="record" hide-name="true"
															   only-show-ref-data-class="true"
															   hide-enum-list="false"></element-data-type>
										</td>
									</tr>
									</tbody>
								</table>
							</div>
							<div class="paginationContainer">
								<mc-table-pagination display-records="mcDisplayRecords"></mc-table-pagination>
							</div>
						</div>
					</mc-table>-->
				</div>
			</div>
			<div class="d-flex justify-content-between p-2">
				<mat-paginator [pageSizeOptions]="[ 5, 10, 20,50]" [pageSize]="20" [length]="totalItemCount" showFirstLastButtons></mat-paginator>
			</div>
		</div>
	</div>

	<!--    Submit at step 2- AS-->
	<div *ngIf="model.createType == 'copy'" class="row">
		<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">

			<table mat-table [dataSource]="dataSourceSelectedDataTypes" matSort class="table table-bordered">
				<ng-container matColumnDef="label">
					<th mat-header-cell *matHeaderCellDef mat-sort-header [disabled]="!hideFiltersSelectedDataTypes" style="cursor: pointer; max-width: 26%; width: 26%;" columnName="label">
						<span [hidden]="!hideFiltersSelectedDataTypes">Name</span>
						<div [hidden]="hideFiltersSelectedDataTypes">
							<mat-form-field class="filter" floatLabel="never">
								<mat-label>Name</mat-label>
								<input #filters matInput name="label" (keyup)="applyFilter()">
							</mat-form-field>
						</div>
					</th>
					<td mat-cell *matCellDef="let record" style="max-width: 26%; width: 26%; text-align: left; word-wrap: break-word;">
						<span>
							{{record.label}}
						</span>
					</td>
				</ng-container>
				<ng-container matColumnDef="description">
					<th mat-header-cell *matHeaderCellDef mat-sort-header [disabled]="!hideFiltersSelectedDataTypes" style="cursor: pointer; max-width: 26%; width: 26%;" columnName="description">
						<span [hidden]="!hideFiltersSelectedDataTypes">Description</span>
						<div [hidden]="hideFiltersSelectedDataTypes">
							<mat-form-field class="filter" floatLabel="never">
								<mat-label>Description</mat-label>
								<input #filters matInput name="description" (keyup)="applyFilter()">
							</mat-form-field>
						</div>
					</th>
					<td mat-cell *matCellDef="let record" style="max-width: 26%; width: 26%; text-align: left; word-wrap: break-word;">
						<span>{{record.description}}</span>
					</td>
				</ng-container>
				<ng-container matColumnDef="domainType">
					<th mat-header-cell *matHeaderCellDef mat-sort-header [disabled]="!hideFiltersSelectedDataTypes" style="cursor: pointer; max-width: 26%; width: 26%;" columnName="domainType">
						<span [hidden]="!hideFiltersSelectedDataTypes">Type</span>
						<div [hidden]="hideFiltersSelectedDataTypes">
							<mat-form-field class="filter" floatLabel="never">
								<mat-label>Type</mat-label>
								<input #filters matInput name="domainType" (keyup)="applyFilter()">
							</mat-form-field>
						</div>
					</th>
					<td mat-cell *matCellDef="let record" style="max-width: 26%; width: 26%; text-align: left; word-wrap: break-word;">
						<span>{{record.domainType}}</span>
					</td>
				</ng-container>

				<ng-container matColumnDef="status">

					<th mat-header-cell *matHeaderCellDef style="cursor: pointer; max-width: 15%; width: 15%;">
						Status
					</th>
					<td mat-cell *matCellDef="let record" style="max-width: 15%; width: 15%; text-align: left; word-wrap: break-word;">
						<span *ngIf="finalResult && finalResult[record.id] && finalResult[record.id].hasError">
							<div><i class="fas fa-times copyElementError"></i></div>
							<div class="errorMessage">{{finalResult[record.id].result}}</div>
						</span>
						<span *ngIf="finalResult && finalResult[record.id] && !finalResult[record.id].hasError">
							<div><i class="fas fa-check copyElementSuccess"></i>&nbsp;Success</div>
						</span>
					</td>
				</ng-container>

				<tr mat-header-row *matHeaderRowDef="displayedColumnsSelectedDataTypes"></tr>
				<tr mat-row *matRowDef="let record; columns: displayedColumnsSelectedDataTypes;"></tr>

			</table>

			<div class="d-flex justify-content-between p-2">
				<mat-paginator [pageSizeOptions]="[ 5, 10, 20,50]" [pageSize]="20" [length]="totalSelectedItemsCount" showFirstLastButtons></mat-paginator>
			</div>
			<div style="margin-top: 50px;">
				<div [hidden]="processing">
					<!--<uib-progressbar max="max" value="dynamic" class="progress-striped active">
						<span style="color:white; white-space:nowrap;"></span>
					</uib-progressbar>-->
				</div>
				<div [hidden]="!processing && isProcessComplete">
					<div class="alert alert-success" *ngIf="failCount === 0">
						<strong>Success!</strong> All copied successfully!
					</div>
					<div class="alert alert-danger" *ngIf="failCount > 0">
						<strong>Error!</strong> {{failCount}} Error(s) in copy process!
					</div>
				</div>
			</div>
		</div>
	</div>

	<!--<div style="margin-top:5px;">
		<div class="row" [hidden]="$isLast()">
			<div class="col-xs-5 col-sm-5 col-md-5 col-lg-5">
				<button [disabled]="$isFirst() || processing" class="btn btn-default btn-sm" (click)="previousStep()">
					<span class="fas fa-chevron-left"></span>
					Previous
				</button>
			</div>
			<div class="col-xs-2 col-sm-2 col-md-2 col-lg-2" style="text-align: center">

			</div>

			<div class="col-xs-5 col-sm-5 col-md-5 col-lg-5" style="text-align: right">
				<button [hidden]="$isLast()" class="btn btn-success btn-sm" (click)="save()" [disabled]="processing || isProcessComplete || (getActiveStep().hasForm && !getActiveStep().valid)">
					Submit
				</button>
				<button [hidden]="$isLast()" class="btn btn-default btn-sm" (click)="cancelWizard()" [disabled]="processing">
					<span *ngIf="!isProcessComplete">Cancel</span>
					<span *ngIf="isProcessComplete">Close</span>
				</button>
			</div>
		</div>
	</div>-->
</div>
