<div class="heading-container">
	<h4 *ngIf="totalItemCount > 0">
		There are {{totalItemCount}} emails in this repository. 
	</h4>
	<h4 *ngIf="totalItemCount === 0">
		There are no emails in this repository. 
	</h4>
</div>

<div *ngIf="totalItemCount > 0">
	<div class="mcTableContainer">
		<table mat-table [dataSource]="dataSource" matSort class="mdm--table mdm--table-responsive table table-borderless table-striped">
			<ng-container matColumnDef="sentToEmailAddress">
				<th mat-header-cell *matHeaderCellDef mat-sort-header [disabled]="!hideFilters" style="cursor: pointer;" columnName="sentToEmailAddress">
					<span [hidden]="!hideFilters">To</span>
					<div [hidden]="hideFilters">
						<mat-form-field class="filter" floatLabel="never">
							<mat-label>To</mat-label>
							<input #filters matInput name="sentToEmailAddress" (keyup)="applyFilter()">
						</mat-form-field>
					</div>
				</th>
				<td mat-cell *matCellDef="let record" style=" text-align: left; word-wrap: break-word;">
					<div class="mdm--td-cell">
						To
					</div>
					<span>{{record.sentToEmailAddress}}</span>
				</td>
			</ng-container>
			<ng-container matColumnDef="dateTimeSent">
				<th mat-header-cell *matHeaderCellDef mat-sort-header [disabled]="!hideFilters" style="cursor: pointer;" columnName="dateTimeSent">
					<span [hidden]="!hideFilters">Date/Time</span>
				</th>
				<td mat-cell *matCellDef="let record" style="text-align: left; word-wrap: break-word;">
					<div class="mdm--td-cell">
						Date/Time
					</div>
					<span>{{record.dateTimeSentString}}</span>
				</td>
			</ng-container>
			<ng-container matColumnDef="subject">
				<th mat-header-cell *matHeaderCellDef mat-sort-header [disabled]="!hideFilters" style="cursor: pointer;" columnName="subject">
					<span [hidden]="!hideFilters">Subject/Body</span>
					<div [hidden]="hideFilters">
						<mat-form-field class="filter" floatLabel="never">
							<mat-label>Subject/Body</mat-label>
							<input #filters matInput name="body" (keyup)="applyFilter()">
						</mat-form-field>
					</div>
				</th>
				<td mat-cell *matCellDef="let record" style="text-align: left; word-wrap: break-word;">
					<div class="mdm--td-cell">
						Subject/Body
					</div>
					<span style="font-weight: bold;">{{record.subject}}</span>
					<br>
					<mdm-more-description [description]="record.body" [length]="200" style="display: block; max-width: 80%; margin-left: auto;"></mdm-more-description>
				</td>
			</ng-container>
			<ng-container matColumnDef="successfullySent">
				<th mat-header-cell *matHeaderCellDef mat-sort-header [disabled]="!hideFilters" style="cursor: pointer; text-align: left;" columnName="successfullySent">
					<span [hidden]="!hideFilters">Status</span>
				</th>
				<td mat-cell *matCellDef="let record" style="text-align: left; word-wrap: break-word;">
					<div class="mdm--td-cell">
						Status
					</div>
					<div>
						<a *ngIf="record.successfullySent">
							Successful
						</a>
						<a *ngIf="!record.successfullySent" (click)="toggleMessage(record)" style="text-decoration: none; cursor: pointer;">
							Failed
						</a>
						<div *ngIf="!record.successfullySent && record.showFailure" style="margin-top: 5px;">
							{{record.failureReason}}
						</div>
					</div>
				</td>
			</ng-container>
			<tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
			<tr mat-row *matRowDef="let record; columns: displayedColumns;"></tr>
		</table>
	</div>
</div>
<div class="mdm--mat-pagination">
	<mat-paginator [pageSizeOptions]="[5, 10, 20,50]" [pageSize]="5" [length]="totalItemCount" showFirstLastButtons></mat-paginator>
</div>
