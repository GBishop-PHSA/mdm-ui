<div>
    <div class="panel panel-default">
        <form editable-form name="editableForm" onbeforesave="formBeforeSave()" disable-submit-on-enter>
        <div class="panel-body panel-table">
            <h4>
                <div class="col-xs-10 col-sm-10 col-md-10 col-lg-10" style="padding: 0px !important;">
                    <span ng-class="{'deletedDataModelTitle':mcModelObject.deleted, 'xeditableInput':true}">
                        <!--<span ng-bind-html="mcModelObject.label | mchighlighter:$root.searchCriteria"-->
                              <!--class="dataModelDetailsLabel">-->
                        <!--</span>-->
                        <span class="xeditableInput">
                            <span editable-text="mcModelObject.label"
                                  e-name="label"
                                  e-style="width: 99%"
                                  class="dataClassDetailsLabel"
                                  ng-bind-html="mcModelObject.label | mchighlighter:$root.searchCriteria"
                                  onbeforesave="validateLabel($data)"></span>
                        </span>
                        <i ng-class="{'fa fa-star favouritesIcon':true, addedToFavourite:addedToFavourite}"
                           ng-click="toggleFavourite()"
                           uib-tooltip="Favourite"></i>
                        <i id="helpIcon" class="fa fa-info-circle themeColor" style="font-size: 14px;" ng-click="loadHelp()" tooltip-placement="left" uib-tooltip="Help"></i>
                    </span>
                        <span class="publiclyReadable" ng-show="mcModelObject.readableByEveryone">
                        <i class="fa fa-globe themeColor" aria-hidden="true" title="Publicly Readable"></i>
                    </span>
                </div>
                <div class="dataModelTypeIcon"
                     ng-if="mcModelObject.type === 'Data Standard'">
                    <i uib-tooltip="Data Standard" style="font-size: 30px;" class="fa fa-file-text-o themeColor"></i>
                </div>
                <div class="dataModelTypeIcon"
                     ng-if="mcModelObject.type === 'Data Asset'">
                    <i uib-tooltip="Data Asset" style="font-size: 30px;" class="fa fa-database themeColor"></i>
                </div>
            </h4>
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12" style="padding: 0px !important;">
                <small class="elementDetailMCType">Data Model</small>
                <element-status mc-element="mcModelObject"></element-status>
                <span ng-if="mcModelObject.deleted" class="label label-danger"  style="vertical-align: middle;font-size: 9px;">Deleted</span>
                <br>
                <div style="font-size: 12px;font-style:italic;">
                    Version: {{mcModelObject.documentationVersion}}
                </div>
                <span style="font-size: 11px;font-style: italic" class="dataModelDetailsLastUpdate">Last Update: {{::mcModelObject.lastUpdated | date:"yyyy-MM-dd HH:mm:ss" }}</span>
                <span ng-if="mcModelObject.finalised && mcModelObject.dateFinalised" style="font-size: 11px;font-style: italic; margin-left: 10px" class="dataModelDetailsLastUpdate">Finalised On: {{::mcModelObject.dateFinalised | date:"yyyy-MM-dd HH:mm:ss" }}</span>
            </div>
        </div>

        <table class="table table-condensed dataModelDetailTable">
            <tbody>
                <tr>
                    <td class="detailsRowHeader  col-sx-2 col-sm-2 col-md-2">Aliases</td>
                    <td>
                        <div style="width:50%">
                            <element-alias
                                    in-edit-mode="editableForm.$visible"
                                    aliases="mcModelObject.editAliases"></element-alias>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td class="detailsRowHeader  col-sx-2 col-sm-2 col-md-2">Author</td>
                    <td>
                        <span class="xeditableInput">
                            <span editable-text="mcModelObject.author"
                                  e-name="author"
                                  e-style="width: 99%"
                                  ng-bind-html="mcModelObject.author | mchighlighter:$root.searchCriteria"
                                  class="dataModelDetailsAuthor"></span>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="detailsRowHeader col-sx-2 col-sm-2 col-md-2">Organisation</td>
                    <td>
                        <span class="xeditableInput">
                            <span editable-text="mcModelObject.organisation"
                                  e-name="organisation"
                                  class="dataModelDetailsOrganisation"
                                  e-style="width: 99%"
                                  ng-bind-html="mcModelObject.organisation | mchighlighter:$root.searchCriteria"></span>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="detailsRowHeader col-md-2">Description</td>
                    <td class="elementDetailDescription">

                        <markdown-text-area mc-editable-form="editableForm" mc-element="mcModelObject" mc-property="'description'"></markdown-text-area>
                        <!--<markdown-text-area  description="mcModelObject.description" in-edit-mode="editableForm.$visible"></markdown-text-area>-->

                         <!--<span class="xeditableTextArea">-->
                            <!--<span  ng-show="editableForm.$visible"-->
                                   <!--editable-textarea="mcModelObject.description"-->
                                   <!--e-name="description"-->
                                   <!--e-style="width: 99%;"-->
                                   <!--e-rows="10"-->
                                   <!--e-ng-keyup="descriptionKeyUp($event)"-->
                                   <!--onbeforesave="validateValue($data,row)"><p class="dataModelDetailsDescription" ng-bind-html="mcModelObject.description  | mchighlighter:$root.searchCriteria"></p></span>-->
                             <!--</span>-->
                            <!--<div style="font-style: italic; cursor: pointer;font-size: 11px; color: #777777;">-->
                                <!--<div style="float: left; margin-bottom: 10px;" ng-show="editableForm.$visible" >-->
                                    <!--<span><input type="checkbox" style="font-style: italic; cursor: pointer;" ng-model="showMarkDownPreview"> Show Markdown Preview</span>-->
                                    <!--<span style="padding-left: 10px;"><a ng-click="showAddElementToMarkdown()">Add Element</a> </span>-->
                                <!--</div>-->
                                <!--<div style="float: right; margin-bottom: 10px;margin-right: 15px;" ng-show="editableForm.$visible">-->
                                    <!--[Alt text](attachment.png)&nbsp;&nbsp;**Strong**&nbsp;&nbsp;#Heading-->
                                <!--</div>-->
                            <!--</div>-->
                            <!--<div style="clear: both;">-->
                                <!--<span markdown="editableForm.$data.description" ng-show="(showMarkDownPreview && editableForm.$visible) || (!editableForm.$visible)" makdown></span>-->
                            <!--</div>-->
                    </td>
                </tr>
                <tr>
                    <td class="detailsRowHeader col-sx-2 col-sm-2 col-md-2">Type</td>
                    <td>
                        <span ng-bind-html="mcModelObject.type  | mchighlighter:$root.searchCriteria">
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="detailsRowHeader  col-sx-2 col-sm-2 col-md-2">Classifications</td>
                    <td>
                        <element-classifications classifications="mcModelObject.classifiers" editable="editableForm"></element-classifications>
                    </td>
                </tr>
                <!--<tr ng-show="!editableForm.$visible">-->
                    <!--<td class="detailsRowHeader col-sx-2 col-sm-2 col-md-2">-->
                        <!--Links-->
                    <!--</td>-->
                    <!--<td>-->
                        <!--<div style="width: 100%;" ng-if="mcModelObject">-->
                            <!--<all-links-in-paged-list-->
                                    <!--parent="mcModelObject"-->
                                    <!--show-description="true"-->
                                    <!--show-no-links-message="true"-->
                                    <!--type="'static'"></all-links-in-paged-list>-->

                        <!--</div>-->
                    <!--</td>-->
                <!--</tr>-->

                <tr>




                    <td colspan="2" style="text-align: right;">

                        <div style="float: right;margin-bottom: 3px;margin-left: 5px;" ng-show="!editableForm.$visible && !editable.$deletePending" ng-if="showDelete">
                            <div style="float: right;margin-bottom: 3px;margin-left: 5px;" ng-show="!editableForm.$visible && !editable.$deletePending" uib-dropdown is-open="false"  ng-if="showDelete">
                                <button type="button"
                                        uib-tooltip="Delete"
                                        class="btn btn-default btn-xs dropdown-toggle"
                                        ng-disabled="deleteInProgress || processing"
                                        uib-dropdown-toggle>
                                    <i class="fa fa-trash-o deleteButton" aria-hidden="true"></i>
                                    <span class="caret" style="margin-right: 2px;"></span>
                                </button>
                                <ul class="dropdown-menu" uib-dropdown-menu style="right: 0; left: auto;" role="menu" aria-labelledby="single-button">
                                    <li class="modelFilterItem" ng-click="askForSoftDelete()" ng-if="!mcModelObject.deleted">
                                        <a title="Just mark it as deleted">Mark as deleted</a>
                                    </li>
                                    <li class="modelFilterItem" ng-click="askForPermanentDelete()">
                                        <a title="Permanently delete the Data Model">Delete <span class="errorMessage">permanently</span></a>
                                    </li>
                                </ul>
                            </div>
                        </div>

                        <div style="float: right;margin-bottom: 3px">
                            <div ng-if="showEdit" ng-show="!editableForm.$visible && !editable.$deletePending" class="btn-group-xs" uib-dropdown is-open="false" style="margin-bottom: 3px;position: relative; float: right; margin-right:4px;">
                                <button id="singleX-button" type="button" class="btn btn-xs dropdown-toggle btn-default addNewModelButton themeColor"
                                        ng-show="!editableForm.$visible && !editable.$deletePending"
                                        ng-disabled="deleteInProgress || processing || mcModelObject.finalised"
                                        uib-tooltip="Edit"
                                        ng-click="editableForm.$show();"
                                        uib-dropdown-toggle>
                                    <i class="fa fa-pencil-square-o" aria-hidden="true"></i>
                                    <!--<span class="caret" style="margin-right: 2px;"></span>-->
                                </button>
                            </div>
                            <editable-form-buttons
                                    ng-show="editableForm.$visible"
                                    on-cancel-edit="onCancelEdit"
                                    editable="editableForm"
                                    text-location="left"
                                    hide-delete="true"
                                    processing="deleteInProgress"></editable-form-buttons>
                        </div>

                        <div ng-if="showFinalise" uib-tooltip="Finalise" class="btn-group-xs" style="margin-bottom: 3px;position: relative; float: right; margin-right:4px;"
                             ng-show="!editableForm.$visible && !editable.$deletePending">
                            <button  class="btn btn-xs btn-default addNewModelButton themeColor"
                                     ng-click="finalise()" type="button"
                                     ng-disabled="deleteInProgress || processing">
                                <i class="fa fa-check-circle" aria-hidden="true"></i>
                            </button>
                        </div>
                        <div ng-if="showPermission" uib-tooltip="User & Group Access" class="btn-group-xs" style="margin-bottom: 3px;position: relative; float: right; margin-right:4px;"   ng-show="!editableForm.$visible && !editable.$deletePending">
                            <button  class="btn btn-xs btn-default addNewModelButton themeColor" ng-click="toggleSecuritySection()" type="button" ng-disabled="deleteInProgress || processing">
                                <i class="fa fa-user userAccess"></i>
                            </button>
                        </div>

                        <div ng-if="showNewVersion" uib-tooltip="Create a New Version" class="btn-group-xs" style="margin-bottom: 3px;position: relative; float: right; margin-right:4px;"   ng-show="!editableForm.$visible && !editable.$deletePending">
                            <button  class="btn btn-xs btn-default addNewModelButton themeColor" ng-click="newVersion()" type="button" ng-disabled="deleteInProgress || processing">
                                <i class="fa fa-copy userAccess"></i>
                            </button>
                        </div>

                        <div ng-if="isAdminUser" uib-tooltip="Compare" class="btn-group-xs" style="margin-bottom: 3px;position: relative; float: right; margin-right:4px;"
                             ng-show="!editableForm.$visible && !editable.$deletePending">
                            <div uib-dropdown is-open="false">
                                <button type="button"
                                        uib-tooltip="Compare"
                                        class="btn btn-default btn-xs dropdown-toggle"
                                        ng-disabled="deleteInProgress || processing"
                                        uib-dropdown-toggle>
                                    <i class="fa fa-balance-scale themeColor" aria-hidden="true"></i>
                                    <span class="caret" style="margin-right: 2px;"></span>
                                </button>
                                <ul class="dropdown-menu" uib-dropdown-menu style="right: 0; left: auto;" role="menu" aria-labelledby="single-button">
                                    <li class="modelFilterItem"  ng-if="!mcModelObject.deleted" ng-click="compare()">
                                        <a>Compare to another Data Model</a>
                                    </li>
                                    <li ng-if="compareToList && compareToList.length > 0" class="divider"></li>
                                    <li class="modelFilterItem" ng-repeat="el in compareToList" ng-click="compare(el)">
                                        <a>{{el.label}} <span style="font-style: italic; font-size: 12px;">{{el.documentationVersion}}</span></a>
                                    </li>
                                </ul>
                            </div>
                        </div>

                        <div class="btn-group-xs" uib-dropdown is-open="false" style="margin-bottom: 3px;position: relative; float: right; margin-right:4px;"
                             ng-show="!editableForm.$visible && !editable.$deletePending">
                            <button ng-if="isLoggedIn" uib-tooltip="Export as JSON, XML,..." tooltip-class="mcTooltip" id="single-button" type="button" class="btn btn-xs dropdown-toggle btn-default addNewModelButton themeColor"  ng-disabled="processing || deleteInProgress" uib-dropdown-toggle>
                                <i class="fa fa-download" aria-hidden="true"></i>
                                <span class="caret" style="margin-right: 2px;"></span>
                            </button>
                            <ul class="dropdown-menu" uib-dropdown-menu style="right: 0; left: auto;" role="menu" aria-labelledby="single-button">
                                <li ng-repeat="exporter in exportList" class="modelFilterItem" ng-click="export(exporter)">
                                    <a title="{{exporter.displayName}}">{{exporter.displayName}}</a>
                                </li>
                            </ul>
                        </div>

                        <div uib-tooltip="Search" class="btn-group-xs" style="margin-bottom: 3px;position: relative; float: right; margin-right:4px;" ng-show="!editableForm.$visible && !editableForm.$deletePending">
                            <button  class="btn btn-xs btn-default addNewModelButton themeColor" type="button" ng-click="toggleShowSearch()" ng-disabled="processing">
                                <i class="fa fa-search themeColor"></i>
                            </button>
                        </div>

                        <div class="deleteInProgressSpinner" style="margin-bottom: 3px;position: relative; float: right; margin-right:8px;" ng-show="deleteInProgress">
                            <a style="font-size: 14px; text-decoration: none;">
                                <i class="fa fa-refresh fa-spin"></i> Deleting...
                            </a>
                        </div>




                        <div style="margin-bottom: 3px;position: relative; float: right; margin-right:8px;" ng-show="exportedFileIsReady">
                            <div id="exportFileDownload"></div>
                        </div>
                        <div style="clear: both;" ng-show="processing">
                            <uib-progressbar max="100" value="100" class="progress-striped active">
                                <span style="color:white; white-space:nowrap;"></span>
                            </uib-progressbar>
                        </div>
                        <div style="text-align: left" ng-show="exportError">
                            <div style="padding-top: 25px;">
                                <div class="alert alert-danger">
                                    <a class="close" ng-click="resetExportError()" aria-label="close">&times;</a>
                                    <strong>Error!</strong> {{exportError}}
                                </div>
                            </div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </form>
    </div>
    <div class="userAccess" ng-if="securitySection && !editableForm.$visible && !editable.$deletePending" style="margin: 10px 0px 50px 0px">
        <share-with mc-element="mcModelObject" mc-domain-type="'DataModel'"></share-with>
        <div>
            <div style="margin-top: 10px">
                <user-access-new parent="mcModelObject" parent-type="'DataModel'"></user-access-new>
            </div>
            <div style="margin-top: 50px">
                <group-access-new parent="mcModelObject" parent-type="'DataModel'"></group-access-new>
            </div>
        </div>
    </div>
</div>